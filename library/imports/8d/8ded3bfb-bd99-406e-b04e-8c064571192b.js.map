{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\lvl-3.js"],"names":["cc","Class","extends","Component","properties","star","type","Node","default","bg","obs1","obs2","return","speed","dir","count","spacemAudio","AudioClip","jumpAudio","nextAudio","onLoad","on","event","director","loadScene","rigidBody","getComponent","RigidBody","getPhysicsManager","enabled","systemEvent","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","jump","linearVelocity","v2","changeSound","audioEngine","playEffect","jumpSound","nextSound","playState","Animation","keyCode","macro","KEY","a","active","play","d","w","y","space","color","onBeginContact","contact","selfCollider","otherCollider","node","name","start","update","dt","x"],"mappings":"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","file":"lvl-3.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        star: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        bg: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        obs1: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        obs2: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        return: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        speed: 500,\r\n        dir: 0,\r\n        count: 2,\r\n        spacemAudio: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n        jumpAudio: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n        nextAudio: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.return.on('touchstart', function (event) {\r\n            cc.director.loadScene('start');\r\n        }, this);\r\n        this.rigidBody = this.getComponent(cc.RigidBody);\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        // cc.director.getPhysicsManager().debugDrawFlags = cc.PhysicsManager.DrawBits.e_aabbBit |\r\n        //     cc.PhysicsManager.DrawBits.e_pairBit |\r\n        //     cc.PhysicsManager.DrawBits.e_centerOfMassBit |\r\n        //     cc.PhysicsManager.DrawBits.e_jointBit |\r\n        //     cc.PhysicsManager.DrawBits.e_shapeBit;\r\n    },\r\n\r\n    jump() {\r\n        this.rigidBody.linearVelocity = cc.v2(0, 650);\r\n    },\r\n    changeSound() {\r\n        cc.audioEngine.playEffect(this.spacemAudio, false);\r\n    },\r\n    jumpSound() {\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n    nextSound() {\r\n        cc.audioEngine.playEffect(this.nextAudio, false);\r\n    },\r\n\r\n    onKeyDown(event) {\r\n        var playState = this.getComponent(cc.Animation);\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                if (this.obs1.getComponent(cc.RigidBody).active == false) {\r\n                    playState.play(\"leftwhite\");\r\n                }\r\n                if (this.obs1.getComponent(cc.RigidBody).active == true) {\r\n                    playState.play(\"leftblack\");\r\n                }\r\n                this.dir = 1;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                if (this.obs1.getComponent(cc.RigidBody).active == false) {\r\n                    playState.play(\"rightwhite\");\r\n                }\r\n                if (this.obs1.getComponent(cc.RigidBody).active == true) {\r\n                    playState.play(\"rightblack\");\r\n                }\r\n                this.dir = 2;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.jumpSound();\r\n                if (this.rigidBody.linearVelocity.y == 0) {\r\n                    this.jump();\r\n                }\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                this.changeSound();\r\n                playState.play(\"rightwhite\");\r\n                this.star.color = cc.color(255, 255, 255);\r\n                this.bg.color = cc.color(51, 51, 51);\r\n                this.obs1.color = cc.color(85, 85, 85);\r\n                this.obs2.color = cc.color(255, 255, 255);\r\n                this.obs1.getComponent(cc.RigidBody).active = false;\r\n                this.obs2.getComponent(cc.RigidBody).active = true;\r\n                if (this.count == 1) {\r\n                    playState.play(\"rightblack\");\r\n                    this.star.color = cc.color(0, 0, 0);\r\n                    this.bg.color = cc.color(255, 255, 255);\r\n                    this.obs1.color = cc.color(0, 0, 0);\r\n                    this.obs2.color = cc.color(85, 85, 85);\r\n                    this.obs1.getComponent(cc.RigidBody).active = true;\r\n                    this.obs2.getComponent(cc.RigidBody).active = false;\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    onKeyUp(event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.dir = 0;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.dir = 0;\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                this.count--;\r\n                if (this.count == 0) {\r\n                    this.count = 2;\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    onBeginContact(contact, selfCollider, otherCollider) {\r\n        if (otherCollider.node.name == 'star') {\r\n            this.nextSound();\r\n            cc.director.loadScene('lvl-4');\r\n        }\r\n        if (otherCollider.node.name == 'pd') {\r\n            cc.director.loadScene('lvl-3');\r\n        }\r\n    },\r\n    start() {\r\n        this.obs1.getComponent(cc.RigidBody).active = true;\r\n        this.obs2.getComponent(cc.RigidBody).active = false;\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.dir == 1) {\r\n            this.node.x -= this.speed * dt;\r\n\r\n        } else if (this.dir == 2) {\r\n            this.node.x += this.speed * dt;\r\n        }\r\n\r\n    },\r\n});\r\n"]}