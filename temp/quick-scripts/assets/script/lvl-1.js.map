{"version":3,"sources":["lvl-1.js"],"names":["cc","Class","extends","Component","properties","star","type","Node","default","bg","obs1","obs2","return","speed","dir","count","spacemAudio","AudioClip","jumpAudio","nextAudio","onLoad","Pos","node","getPosition","a","convertToNodeSpace","on","event","audioEngine","stopMusic","director","loadScene","rigidBody","getComponent","RigidBody","getPhysicsManager","enabled","systemEvent","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","jump","linearVelocity","v2","changeSound","playEffect","jumpSound","nextSound","playState","Animation","keyCode","macro","KEY","active","play","d","w","y","space","color","j","rotation","onBeginContact","contact","selfCollider","otherCollider","name","start","update","dt","x"],"mappings":"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","file":"lvl-1.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        star: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        bg: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        obs1: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        obs2: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        return: {\r\n            type: cc.Node,\r\n            default: null,\r\n        },\r\n        speed: 500,\r\n        dir: 0,\r\n        count: 2,\r\n        spacemAudio: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n        jumpAudio: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n        nextAudio: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        var Pos = this.node.getPosition();\r\n        this.a = this.node.convertToNodeSpace(Pos);\r\n        this.return.on('touchstart', function (event) {\r\n            cc.audioEngine.stopMusic();\r\n            cc.director.loadScene('start');\r\n        }, this);\r\n        this.rigidBody = this.getComponent(cc.RigidBody);\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        // cc.director.getPhysicsManager().debugDrawFlags = cc.PhysicsManager.DrawBits.e_aabbBit |\r\n        //     cc.PhysicsManager.DrawBits.e_pairBit |\r\n        //     cc.PhysicsManager.DrawBits.e_centerOfMassBit |\r\n        //     cc.PhysicsManager.DrawBits.e_jointBit |\r\n        //     cc.PhysicsManager.DrawBits.e_shapeBit;\r\n    },\r\n\r\n    jump() {\r\n        this.rigidBody.linearVelocity = cc.v2(0, 650);\r\n    },\r\n    changeSound() {\r\n        cc.audioEngine.playEffect(this.spacemAudio, false);\r\n    },\r\n    jumpSound() {\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n    nextSound() {\r\n        cc.audioEngine.playEffect(this.nextAudio, false);\r\n    },\r\n\r\n    onKeyDown(event) {\r\n        var playState = this.getComponent(cc.Animation);\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n\r\n                if (this.obs1.getComponent(cc.RigidBody).active == false) {\r\n                    playState.play(\"leftwhite\");\r\n                }\r\n                if (this.obs1.getComponent(cc.RigidBody).active == true) {\r\n                    playState.play(\"leftblack\");\r\n                }\r\n                this.dir = 1;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                if (this.obs1.getComponent(cc.RigidBody).active == false) {\r\n                    playState.play(\"rightwhite\");\r\n                }\r\n                if (this.obs1.getComponent(cc.RigidBody).active == true) {\r\n                    playState.play(\"rightblack\");\r\n                }\r\n                this.dir = 2;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.jumpSound();\r\n                if (this.rigidBody.linearVelocity.y == 0) {\r\n                    this.jump();\r\n                }\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                this.changeSound();\r\n                playState.play(\"rightwhite\");\r\n                this.star.color = cc.color(255, 255, 255);\r\n                this.bg.color = cc.color(51, 51, 51);\r\n                this.obs1.color = cc.color(85, 85, 85);\r\n                this.obs2.color = cc.color(85, 85, 85);\r\n                this.obs1.getComponent(cc.RigidBody).active = false;\r\n                this.obs2.getComponent(cc.RigidBody).active = false;\r\n                if (this.count == 1) {\r\n                    playState.play(\"rightblack\");\r\n                    this.star.color = cc.color(0, 0, 0);\r\n                    this.bg.color = cc.color(255, 255, 255);\r\n                    this.obs1.color = cc.color(0, 0, 0);\r\n                    this.obs2.color = cc.color(0, 0, 0);\r\n                    this.obs1.getComponent(cc.RigidBody).active = true;\r\n                    this.obs2.getComponent(cc.RigidBody).active = true;\r\n                }\r\n                break;\r\n            case cc.macro.KEY.j:\r\n                this.node.rotation += 3;\r\n                break\r\n        }\r\n\r\n    },\r\n    onKeyUp(event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.dir = 0;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.dir = 0;\r\n                break;\r\n            case cc.macro.KEY.space:\r\n                this.count--;\r\n                if (this.count == 0) {\r\n                    this.count = 2;\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    onBeginContact(contact, selfCollider, otherCollider) {\r\n        if (otherCollider.node.name == 'star') {\r\n            this.nextSound();\r\n            cc.director.loadScene('lvl-2');\r\n        }\r\n        if (otherCollider.node.name == 'pd') {\r\n            cc.director.loadScene('lvl-1');\r\n        }\r\n    },\r\n    start() {\r\n\r\n        this.obs1.getComponent(cc.RigidBody).active = true;\r\n        this.obs2.getComponent(cc.RigidBody).active = true;\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.dir == 1) {\r\n            this.a.x -= this.speed * dt;\r\n        } else if (this.dir == 2) {\r\n            this.a.x += this.speed * dt;\r\n        }\r\n    },\r\n});\r\n"]}